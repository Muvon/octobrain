# Octobrain Default Configuration Template
# This file contains default values for octobrain configuration
# It will be copied to the system config directory on first run

[embedding]
# Embedding model for memory operations
# Format: provider:model (e.g., voyage:voyage-3.5-lite, openai:text-embedding-3-small)
# Default: voyage:voyage-3.5-lite
model = "voyage:voyage-3.5-lite"

# Batch size for embedding generation (number of texts to process at once)
# Default: 32
batch_size = 32

# Maximum tokens per batch request
# Default: 100000
max_tokens_per_batch = 100000

[search]
# Similarity threshold for memory search (0.0 to 1.0)
# Lower values = more results, higher values = fewer but more relevant
# Default: 0.3
similarity_threshold = 0.3

# Maximum number of results to return from search
# Default: 50
max_results = 50

[search.hybrid]
# Enable hybrid search combining multiple signals
# When enabled, searches use vector similarity + keyword matching + recency + importance
# Default: true
enabled = true

# Default weight for vector similarity signal (0.0-1.0)
# Higher = more emphasis on semantic similarity
# Default: 0.6
default_vector_weight = 0.6

# Default weight for keyword matching signal (0.0-1.0)
# Higher = more emphasis on exact keyword matches
# Default: 0.2
default_keyword_weight = 0.2

# Default weight for recency signal (0.0-1.0)
# Higher = more emphasis on recently created memories
# Default: 0.1
default_recency_weight = 0.1

# Default weight for importance signal (0.0-1.0)
# Higher = more emphasis on important/frequently accessed memories
# Default: 0.1
default_importance_weight = 0.1

# Recency decay period in days
# Memories decay to ~37% relevance after this many days
# Default: 30
recency_decay_days = 30

# Keyword field weights (relative importance of matches in different fields)
# Title matches are weighted highest, then tags, then content
keyword_title_weight = 3.0
keyword_content_weight = 1.0
keyword_tags_weight = 2.0

[search.reranker]
# Enable reranking for improved search accuracy
# Uses cross-encoder models to score query-document pairs
# Improves accuracy by 20-35% and reduces hallucinations by 35%
# Default: false (disabled by default for backward compatibility)
enabled = false

# Reranker model (fully qualified, e.g., voyage:rerank-2.5, voyage:rerank-2.5-lite)
# Default: voyage:rerank-2.5
model = "voyage:rerank-2.5"

# Number of candidates to retrieve before reranking
# Retrieve more candidates for better reranking accuracy
# Default: 50
top_k_candidates = 50

# Number of results to return after reranking
# Default: 10
final_top_k = 10

[memory]
# Maximum number of memories to keep in storage
# Default: 10000
max_memories = 10000

# Automatic cleanup threshold in days
# Memories older than this may be cleaned up if below importance threshold
# Default: 365 (1 year)
auto_cleanup_days = 365

# Minimum importance for automatic cleanup
# Memories below this threshold and older than auto_cleanup_days may be removed
# Default: 0.1
cleanup_min_importance = 0.1

# Enable automatic relationship detection between memories
# Default: true
auto_relationships = true

# Relationship detection threshold (0.0-1.0)
# Higher values = only very similar memories get linked
# Default: 0.7
relationship_threshold = 0.7

# Maximum memories returned in search
# Default: 50
max_search_results = 50

# Default importance for new memories (0.0-1.0)
# Default: 0.5
default_importance = 0.5

# Enable temporal decay system (Ebbinghaus forgetting curve)
# When enabled, memories naturally fade over time unless accessed
# Default: true
decay_enabled = true

# Half-life for importance decay in days (time for importance to halve)
# Higher values = slower decay, memories stay relevant longer
# Default: 90 (3 months)
decay_half_life_days = 90

# Boost factor for access reinforcement (multiplier per access)
# Higher values = stronger reinforcement from repeated access
# Default: 1.2
access_boost_factor = 1.2

# Minimum importance threshold (floor value after decay)
# Memories will never decay below this value
# Default: 0.05 (5%)
min_importance_threshold = 0.05

# Enable automatic linking between semantically similar memories
# Creates bidirectional relationships automatically (Zettelkasten-style)
# Default: true
auto_linking_enabled = true

# Similarity threshold for auto-linking (0.0-1.0)
# Higher values = only very similar memories get linked
# Recommended: 0.75-0.85 for quality links
# Default: 0.78
auto_link_threshold = 0.78

# Maximum number of auto-links per memory
# Prevents over-linking and maintains graph quality
# Recommended: 3-5 links per memory
# Default: 5
max_auto_links_per_memory = 5

# Create bidirectional links (A->B and B->A)
# Enables graph traversal in both directions
# Default: true
bidirectional_links = true
